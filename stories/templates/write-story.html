{% extends 'base.html' %}
{% load staticfiles %}

{% block title %}
Write Story Chunk
{% endblock %}

{% block body_class %}
write-story
{% endblock %}

{% block head %}
<script src="{% static 'js/story-chunk.js' %}" type="text/javascript"></script>
<script type="text/javascript">
    var max_story_chunk_size = {{ settings.MAX_STORY_CHUNK_SIZE }};
    var min_story_chunk_size = {{ settings.MIN_STORY_CHUNK_SIZE }};
    var max_story_leadin_size = {{ settings.MAX_STORY_LEADIN_SIZE }};
    var min_story_leadin_size = {{ settings.MIN_STORY_LEADIN_SIZE }};
</script>
{% endblock %}

{% block content %}
<header>
    <h1>{{ story.get_title }}</h1>
    {% include "story-authors.html" %}
    {% include "story-progress-bar.html" %}
</header>

{% if final %}
<div class="alert alert-info">Final Segment! Make it count!</div>
{% endif %}

<form role="form" method="post" id="story-chunk-form">
    {% csrf_token %}

    {% include "story-chunk.html" %}
    {% include "form-errors.html" %}
    {% include "story-stats.html" %}


    <footer>
        {% if user == story.manager %}
        {% include "story-invitations.html" %}
        {% endif %}

        <div class="story-submit">
            <button type="submit" class="btn btn-primary">Submit</button>
        </div>
    </footer>
</form>
{% endblock content %}
